{"ast":null,"code":"import { getDeck, shuffleDeck, getCardValue } from '../utils/deckUtils';\nexport const setBet = bet => {\n  return {\n    type: 'SET_BET',\n    payload: bet\n  };\n};\nexport const dealCards = () => {\n  return (dispatch, getState) => {\n    const deck = getDeck();\n    const shuffledDeck = shuffleDeck(deck);\n    console.log(deck);\n    const playerCard1 = shuffledDeck.pop();\n    const dealerCard1 = shuffledDeck.pop();\n    const playerCard2 = shuffledDeck.pop();\n    const hiddenCard = shuffledDeck.pop();\n    const currentDealerScore = getCardValue(dealerCard1) + getCardValue(hiddenCard);\n    const currentPlayerScore = getCardValue(playerCard1) + getCardValue(playerCard2);\n\n    // remove the cards from the deck (we have removed 4 cards)\n    const newDeck = shuffledDeck.slice(4);\n    dispatch({\n      type: 'DEAL_CARDS',\n      payload: {\n        dealerHand: [dealerCard1, hiddenCard],\n        playerHand: [playerCard1, playerCard2],\n        currentDealerScore: currentDealerScore,\n        currentPlayerScore: currentPlayerScore,\n        gameStage: 'inProgress',\n        deck: newDeck\n      }\n    });\n    console.log(getState().game.deck);\n  };\n};\nexport const hit = () => (dispatch, getState) => {\n  const {\n    game\n  } = getState();\n  const deck = game.deck;\n  console.log(deck);\n  const nextCard = getNextCard(deck);\n  const currentScore = getHandValue([...game.playerHand, nextCard]);\n  dispatch({\n    type: 'HIT',\n    payload: {\n      card: nextCard,\n      score: currentScore\n    }\n  });\n\n  // Remove the next card from the deck\n  const newDeck = deck.slice(1);\n  dispatch({\n    type: 'UPDATE_DECK',\n    payload: newDeck\n  });\n};\nexport const getNextCard = deck => {\n  return deck[0];\n};\nexport const getHandValue = hand => {\n  let value = 0;\n  let hasAce = false;\n  for (let i = 0; i < hand.length; i++) {\n    console.log(hand);\n    const cardValue = getCardValue(hand[i].value);\n    if (cardValue === 11) {\n      hasAce = true;\n    }\n    value += cardValue;\n  }\n  if (value > 21 && hasAce) {\n    value -= 10;\n  }\n  return value;\n};\nexport const stand = () => {\n  return (dispatch, getState) => {\n    const deck = getState().game.deck;\n    const dealerHand = getState().game.dealerHand;\n    let dealerScore = getState().game.currentDealerScore;\n\n    // Reveal hidden card and update dealer score\n    const hiddenCard = dealerHand[1];\n    dealerHand[1] = hiddenCard;\n    dealerScore += getCardValue(hiddenCard);\n\n    // Dealer must hit until they have 17 or more\n    while (dealerScore < 17) {\n      const newCard = deck.pop();\n      dealerHand.push(newCard);\n      dealerScore += getCardValue(newCard);\n    }\n    dispatch({\n      type: 'STAND',\n      payload: {\n        hand: dealerHand,\n        score: dealerScore\n      }\n    });\n  };\n};\nexport const resetGame = () => {\n  return {\n    type: 'RESET_GAME'\n  };\n};","map":{"version":3,"names":["getDeck","shuffleDeck","getCardValue","setBet","bet","type","payload","dealCards","dispatch","getState","deck","shuffledDeck","console","log","playerCard1","pop","dealerCard1","playerCard2","hiddenCard","currentDealerScore","currentPlayerScore","newDeck","slice","dealerHand","playerHand","gameStage","game","hit","nextCard","getNextCard","currentScore","getHandValue","card","score","hand","value","hasAce","i","length","cardValue","stand","dealerScore","newCard","push","resetGame"],"sources":["/Users/silasnevstad/Desktop/Everything/CurrentProjects/Casino/my-app/src/actions/gameActions.js"],"sourcesContent":["import { getDeck, shuffleDeck, getCardValue } from '../utils/deckUtils';\n\nexport const setBet = (bet) => {\n  return {\n    type: 'SET_BET',\n    payload: bet\n  };\n};\n\nexport const dealCards = () => {\n  return (dispatch, getState) => {\n    const deck = getDeck();\n    const shuffledDeck = shuffleDeck(deck);\n    console.log(deck)\n\n    const playerCard1 = shuffledDeck.pop();\n    const dealerCard1 = shuffledDeck.pop();\n    const playerCard2 = shuffledDeck.pop();\n    const hiddenCard = shuffledDeck.pop();  \n\n    const currentDealerScore = getCardValue(dealerCard1) + getCardValue(hiddenCard);\n    const currentPlayerScore = getCardValue(playerCard1) + getCardValue(playerCard2);\n\n    // remove the cards from the deck (we have removed 4 cards)\n    const newDeck = shuffledDeck.slice(4);\n\n    dispatch({\n      type: 'DEAL_CARDS',\n      payload: {        \n        dealerHand: [dealerCard1, hiddenCard],\n        playerHand: [playerCard1, playerCard2],\n        currentDealerScore: currentDealerScore,\n        currentPlayerScore: currentPlayerScore,\n        gameStage: 'inProgress',\n        deck: newDeck\n      }\n    });\n\n    console.log(getState().game.deck);\n  };\n};\n\n\n\nexport const hit = () => (dispatch, getState) => {\n  const { game } = getState();\n  const deck = game.deck;\n  console.log(deck);\n\n  const nextCard = getNextCard(deck);\n  const currentScore = getHandValue([...game.playerHand, nextCard]);\n\n  dispatch({\n    type: 'HIT',\n    payload: {\n      card: nextCard,\n      score: currentScore\n    }\n  });\n\n  // Remove the next card from the deck\n  const newDeck = deck.slice(1);\n  dispatch({\n    type: 'UPDATE_DECK',\n    payload: newDeck\n  });\n};\n\nexport const getNextCard = (deck) => {\n  return deck[0];\n}\n\nexport const getHandValue = (hand) => {\n  let value = 0;\n  let hasAce = false;\n\n  for (let i = 0; i < hand.length; i++) {\n    console.log(hand);\n    const cardValue = getCardValue(hand[i].value);\n    if (cardValue === 11) {\n      hasAce = true;\n    }\n    value += cardValue;\n  }\n\n  if (value > 21 && hasAce) {\n    value -= 10;\n  }\n\n  return value;\n}\n\n\n\nexport const stand = () => {\n  return (dispatch, getState) => {\n    const deck = getState().game.deck;\n    const dealerHand = getState().game.dealerHand;\n    let dealerScore = getState().game.currentDealerScore;\n\n    // Reveal hidden card and update dealer score\n    const hiddenCard = dealerHand[1];\n    dealerHand[1] = hiddenCard;\n    dealerScore += getCardValue(hiddenCard);\n\n    // Dealer must hit until they have 17 or more\n    while (dealerScore < 17) {\n      const newCard = deck.pop();\n      dealerHand.push(newCard);\n      dealerScore += getCardValue(newCard);\n    }\n\n    dispatch({\n      type: 'STAND',\n      payload: {\n        hand: dealerHand,\n        score: dealerScore\n      }\n    });\n  };\n};\n\nexport const resetGame = () => {\n  return {\n    type: 'RESET_GAME'\n  };\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}